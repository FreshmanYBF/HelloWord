链路层总结

组成链路的方式有很多，但是总结起来只有两种 —— 光和电

	光有光纤，电有电缆/双绞线/等等
	
	主要是作用在这些不同传导媒介上的协议
	
	
以太网帧封装协议
	两种
		数字设备公司/英特尔公司/Xerox公司联合公布的一个标准
			目的Mac(6)，源Mac(6)，类型(2)，数据(46~1500)，CRC(4)
								  0800(2)，IP数据报(46~1500)
								  0806(2)，ARP请求/应答(28)，PAD(18)
								  8035(2)，RARP请求/应答(28)，PAD(18)
		
		IEEE 802.2/802.3
			目的Mac(6)，源Mac(6)，长度(2)，DSAP(AA)，SSAP(AA)，cntl(03)，org code(00/3)，类型(2)，数据(38~1492)，CRC(4)
																					  0800(2)，IP数据报(38~1482)
																					  0806(2)，ARP请求/应答(28)，PAD(10)
																					  8035(2)，RARP请求/应答(28)，PAD(10)

SLIP(串行线路IP)
	SLIP协议
		IP数据报以0xc0结束
		IP报文中的0xc0用0xdb和0xdc替换
		IP报文中的0xdb用0xdb和0xdd替换
		
		串行电路，每发送一个Bytes，前加一个起始位，后加一个停止位，即共10bits

	SLIP协议缺陷
		对端必须直到对端IP。没有办法把本端的IP地址通知到另一端
		数据帧中没有协议类型字段。如果一条串行线路用于SLIP，那么它不能同时使用其他协议
		没有校验和。只能通过上层协议来发现。


CSLIP(压缩串行线路IP)
	可以将IP首部+TCP首部压缩到5字节


PPP(串行线路点对点协议)
	在串行链路上封装IP的方法。即支持8bits无奇偶校验的异步模式，也支持同步链接。
	LCP（Link Control Protocol）用与链接的建立，配置及测试
	NCP（Network Control Protocol）针对不同网络层协议进行控制 —— IP网络层，OSI网络层，DECnet以及AppleTalk。NCP是对这些协议具体控制进行商榷
		PPP数据帧格式
			标志	地址	控制	协议	信息			CRC		标志
			7E(1)	FF(1)	03(1)	 (2)	最多1500字节	 (2)	7E(1)
			（1）协议
				0x0021 	IP
				0xc021	链路控制数据(LCP)
				0x8021	网络控制数据
			（2）CRC	
				FCS，帧检验序列，是一个循环用于校验码
			（3）7E
				标志字符出现在信息字段中，需要进行转义
					同步链路中，使用比特填充的硬件技术完成
					异步链路中，0X7D用作转义字符，它出现在PPP数据帧中时，紧接着的第6个比特要取其补码。然后再对0x7d进行转义
						数据中的0X7E用0x7D和0x5E替换，实现标志字符的转义
						数据中的0X7D用0X7D和0X5D替换
						默认情况下，如果字符的值小于0x20，一般都要进行转义字符的转义
							防止双方主机中的串行接口驱动程序或调试解调器把这些控制字符解释成特殊的含义
		PPP比SLIP的优点
			（1）支持运行多种协议
			（2）每一帧都有循环用于校验
			（3）通信双方可以使用IP地址的动态协商
			（4）可以对TCP和IP首部进行压缩
			（5）支持链路控制协议 —— 可以对多个数据链路选项进行设置

			
环回接口
	环回接口——允许运行在同一台主机上的客户程序和服务器程序通过TCP/IP进行通信

	1、环回接口可以看作网络层下面的另一个链路层
		传给环回地址的任何数据作为IP输入，放入输入队列中 —— 即传给环回接口的数据也经过了传输层和网络层
		传给广播地址或多播地址的数据复制一份传给环回接口
		任何传给该主机IP地址的数据均送到环回接口
	2、发送给主机本身IP地址的IP数据报一般不出现在相应的网络上
		BSD系统定义了变量useloopback，并初始化为1
			置为0时，以太网驱动程序就会把本地分组送到网络，而不是送到环回接口上



MTU —— 最大传输单元
	不同的链路层之间MTU可能不尽相同
	而在不同链路之间传输的数据是IP数据报
	所以MTU指的是IP数据报最大不需要分片时的长度 —— 即该链路一次能传输的最大单元
	
